<?php date_default_timezone_set('America/New_York');$start_time = explode(' ', microtime()); $start_time = $start_time[1] + $start_time[0];/**********************************************************************************************************************************************************************************/function mySQLQuery($theQuery) {    $databaseHost = 'localhost';    $databaseUser = 'root';    $databasePassword = 'tessa';/*  $databaseUser = 'deltanup_mfried'; *//*  $databasePassword = 'makaha'; */    $databaseName = 'deltanupsi';    $databaseConnection = mysql_pconnect($databaseHost, $databaseUser, $databasePassword) or die('Error Connecting To The MySQL Database!');    mysql_select_db($databaseName);    $theResult = mysql_query($theQuery) or die("<b style=\"color: red;\">MySQL ERROR! " . mysql_error() . ", While Executing Query: <i>$theQuery</i></b>");    mysql_close($databaseConnection);    return $theResult;}/**********************************************************************************************************************************************************************************/function lookup_big($id, $set=""){    if (($id != '') && ($id != '0')){        $result=mysql_fetch_assoc(mySQLQuery("SELECT id, first_name,last_name,nickname,pledge_class, bigs FROM MEMBERS WHERE id = '$id'"));                $set .= "<a href=\"#".$result['pledge_class']."\" style=\"white-space:nowrap;\">".$result['first_name']." ".$result['last_name']." (PC: ".$result['pledge_class'].")</a> ";        if ($result['bigs'] > '0'){ $set.=" -&gt; <br>".lookup_big($result['bigs']); }    }    return $set;}/**********************************************************************************************************************************************************************************/function lookup_family($id, $set=""){    $sql="SELECT id, big, first_name,last_name,big_pledge_class,little,little_first,little_last,little_pledge_class FROM biglittlelisting WHERE big = '$id' ORDER BY little_pledge_class ASC";/*     $sql="SELECT id, big, first_name,last_name,big_pledge_class,little,little_first,little_last,little_pledge_class FROM biglittlelisting WHERE little = '$id' ORDER BY little_pledge_class ASC"; */    $result=mySQLQuery($sql);    $num = mysql_num_rows($result);    if ($num > '0') {        while ($family = mysql_fetch_array($result)){/*         echo "<pre><br>"; print_r($family); echo "</pre>"; *//*                 $set .= "<td><a href=\"#".$family['little_pledge_class']."\" style=\"white-space:nowrap;\">".$family['little_first']." ".$family['little_last']." (PC: ".$family['little_pledge_class'].")</a></td>"; */            $set .= "<a href=\"#".$family['little_pledge_class']."\" style=\"white-space:nowrap;\">".$family['little_first']." ".$family['little_last']." (PC: ".$family['little_pledge_class'].")</a> ";//            $set .= "<a href=\"#".$family['big_pledge_class']."\" style=\"white-space:nowrap;\">".$family['first_name']." ".$family['last_name']." (PC: ".$family['big_pledge_class'].")</a> ";            if ($num >= '1'){ $set.=" <br> "; }/*             if ($num >= '1'){ $set.=" ".lookup_family($family['little'], " "); } *//*             if ($num > '1'){ $set.=" ".lookup_family($family['big']); } */        } /* End WHILE */    } /* End IF */    return $set;}/**********************************************************************************************************************************************************************************/    $query_PC = mySQLQuery("SELECT pledge_class FROM members_pc_list ");    $count = '1';?><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Delta Nu Psi - Psi Upsilon, Delta Nu</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><style type="text/css">    body {background-color:#e6e6e6;font-family:serif;}    .delta{color:#0D1C9D;}    .delta_line{color:#0D1C9D;border-bottom: 2px solid #0D1C9D;}    .psiu{color:#a71930;}    .psiu_line{ color:#a71930;border-bottom: 2px solid #a71930;}    a:link, a:hover, a:visited, a:active {color:#000;}    h3 { padding:0 0 1mm 0;margin:0 0 1mm 0;font-weight: bold;font-family: "Verdana, Arial, Helvetica, sans-serif"; text-align: center; }    .left_side { padding:0 5mm; text-align:left; white-space:nowrap;}    .right_side { white-space:nowrap; }    .tree {border:thin solid transparent; padding:2mm 7mm;margin:0;font-size:10pt;}        .key{border:thin solid transparent; font-size:9pt;padding:0;margin:0;font-weight: bold;}</style></head><body><span style="font-size:10pt;top:5px;position:fixed;"><? echo 'Last Updated: '. date('F j, Y, g:i a'); ?></span>    <div style="text-align:center;">        <p class="delta" style="font-size:18pt;"><strong>All Members of<br>Delta Nu Psi</strong> &amp; <strong class="psiu">Psi Upsilon</strong></p><!--*****************************************************************************************************************************************************************************-->        <table border="0" cellpadding="0" cellspacing="0" style="margin:0 auto;width:35em;"><?php $y=$m=0;$n=1;        while ($row_PC = mysql_fetch_assoc($query_PC)) {                        if (($row_PC['pledge_class'] == "Founders") || ($row_PC['pledge_class'] == "Charter") ){$title=$row_PC['pledge_class'];}else{$title="PC: ".$row_PC['pledge_class'];}            if (($row_PC['pledge_class'] < "36") || ($row_PC['pledge_class'] == "Founders") || ($row_PC['pledge_class'] == "Charter")){$pc="delta_line";}else{$pc="psiu_line";}            print "<tr><th colspan=\"3\"><h3 class=\"$pc\"><a name=\"".$row_PC['pledge_class']."\">$title</a></h3></th></tr>\n";            print "<tr><td><p class=\"key\">Name</p></td><td><p class=\"key\">Littles</p></td><td><p class=\"key\">Family Tree</p></td></tr>\n";                        $query_Members = "SELECT id, first_name, last_name, nickname, pledge_class, bigs FROM members WHERE pledge_class = '".$row_PC['pledge_class']."' ORDER BY last_name ASC";            $all_Members = mySQLQuery($query_Members);            $rowTotal = mysql_num_rows($all_Members);/*             $array[]= array($row_PC['pledge_class'], mysql_num_rows($all_Members)); *//*             print "<pre> ".$row_PC['pledge_class']." ".mysql_num_rows($all_Members)." </pre> "; *//*             print mysql_num_fields($all_Members); */       		$c=0;            while ($row_member = mysql_fetch_assoc($all_Members)) {                if ($row_member['nickname'] != "" ){$nickname=" \"".htmlentities($row_member['nickname'])."\" ";}else{$nickname="";}                print "<tr>";                print "<td class=\"left_side\"  onclick=\"\">".$row_member['first_name']." <i>$nickname</i> ".$row_member['last_name']." <div class=\"tree\" style=\"display:none;\">".lookup_big($row_member['bigs'])."</div></td>";                print "<td class=\"right_side\" align=\"left\"><div class=\"tree\">".lookup_family($row_member['id'])."</div></td>";/* 	If a member took a little of not.  This is what add that info up. */                if (lookup_family($row_member['id']) == "" ) {$c++; $m++;}/*               */                print "<td class=\"right_side\" align=\"left\"><div class=\"tree\">".lookup_big($row_member['bigs'])."</div></td>";/*                 echo "<td><pre>"; print_r($row_member); echo "</pre></td>"; *//*                 print "<td class=\"right_side\" >".$row_member['status']."</td>"; *//*                 print "<td class=\"right_side\" align=\"left\">".$row_member['positions']."</td>"; */                print "</tr>\n"; 				$n++;            }            if ($rowTotal == $c) {$y++;  $row_PC['pledge_class']." "; }/*             print "<tr><td>$c</td></tr>"; */        }/*         print "<tr><td>Total Members: $n <br>Members without Littles: $m <br>Total PC's without Littles: $y</td></tr>"; *//*         print "<pre style=\"float:left;\">";print_r($array);print "</pre>"; */		print " Total Members: ".($n-1)."<br>Members without Littles: $m<br>Total PC's without Littles: $y";/* 		print "<p>Total Members: ".($n-1)."</p>"; */?></table><!--*****************************************************************************************************************************************************************************-->    </div>	<span style="position:fixed;bottom:0;font-size:10pt;"><?php $end_time = explode(' ', microtime()); $total_time = $end_time[0] + $end_time[1] - $start_time; printf('-- %.3f seconds.--', $total_time); ?>	</span></body></html>